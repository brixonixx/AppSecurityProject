{% extends "base.html" %}
{% block title %}Today's Schedule{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="text-center mb-4">Today's Schedule</h2>
  <div class="row">
    <!-- Calendar -->
    <div class="col-md-8">
      <h4 class="mb-3">June 2025</h4>
      <div class="d-flex flex-wrap" id="calendar">
        <!-- Boxes will be generated by JS -->
      </div>
    </div>

    <!-- Sidebar -->
    <div class="col-md-4">
      <div class="bg-light p-3 rounded">
        <h5><strong>Today’s Activity</strong></h5>
        <div id="eventBox" class="mt-3">Click a date to view events.</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<style>
  .calendar-day {
    width: 60px;
    height: 60px;
    margin: 5px;
    border-radius: 10px;
    background-color: #d3d3d3; /* grey default */
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    cursor: pointer;
  }

  .event-day {
    background-color: #aee4ff; /* blue for event */
  }

  .selected {
    border: 2px solid black;
  }
</style>

<script>
  const events = {
    "2025-06-15": ["karaoke at Ang Mo Kio CC"],
    "2025-06-23": ["Community Gardening"],
    "2025-06-28": ["Health Check-up", "Exercise Workshop"]
  };

  const calendar = document.getElementById("calendar");
  const eventBox = document.getElementById("eventBox");
  let selectedDay = null;

  function createCalendar() {
    const daysInJune = 30;
    for (let day = 1; day <= daysInJune; day++) {
      const dateStr = `2025-06-${String(day).padStart(2, '0')}`;
      const dayBox = document.createElement("div");
      dayBox.className = "calendar-day";
      if (events[dateStr]) dayBox.classList.add("event-day");
      dayBox.textContent = day;

      dayBox.onclick = () => {
        if (selectedDay) selectedDay.classList.remove("selected");
        dayBox.classList.add("selected");
        selectedDay = dayBox;

        const items = events[dateStr];
        if (items) {
          eventBox.innerHTML = items.map(e => `<p>• <strong>${e}</strong></p>`).join('');
        } else {
          eventBox.innerHTML = "No events for this day.";
        }
      };

      calendar.appendChild(dayBox);
    }
  }

  createCalendar();
</script>
{% endblock %}
